<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>nerdctl的使用 | Joohwan</title><meta name="author" content="Joohwan."><meta name="copyright" content="Joohwan."><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="nerdctl的使用什么是nerdctlnerdctl是containerd官方提供的兼容Docker命令行的工具，支持Docker Cli所有命令，并且支持dokcer-compose 设计初衷不是Docker Cli复制品，希望促进containerd创新实验的发展，Docker不支持这些实验特性如镜像延迟加载，镜像加密  安装nerdctl官方提供俩种安装包  精简安装包：nerdctl--">
<meta property="og:type" content="article">
<meta property="og:title" content="nerdctl的使用">
<meta property="og:url" content="https://piwriw.github.io/2024/12/26/cloud/k8s/containerd/nerdctl%E7%9A%84%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="Joohwan">
<meta property="og:description" content="nerdctl的使用什么是nerdctlnerdctl是containerd官方提供的兼容Docker命令行的工具，支持Docker Cli所有命令，并且支持dokcer-compose 设计初衷不是Docker Cli复制品，希望促进containerd创新实验的发展，Docker不支持这些实验特性如镜像延迟加载，镜像加密  安装nerdctl官方提供俩种安装包  精简安装包：nerdctl--">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://piwriw.github.io/img/nerdctl.svg">
<meta property="article:published_time" content="2024-12-26T13:55:55.000Z">
<meta property="article:modified_time" content="2026-02-28T13:29:12.663Z">
<meta property="article:author" content="Joohwan.">
<meta property="article:tag" content="k8s">
<meta property="article:tag" content="cloud">
<meta property="article:tag" content="containerd">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://piwriw.github.io/img/nerdctl.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "nerdctl的使用",
  "url": "https://piwriw.github.io/2024/12/26/cloud/k8s/containerd/nerdctl%E7%9A%84%E4%BD%BF%E7%94%A8/",
  "image": "https://piwriw.github.io/img/nerdctl.svg",
  "datePublished": "2024-12-26T13:55:55.000Z",
  "dateModified": "2026-02-28T13:29:12.663Z",
  "author": [
    {
      "@type": "Person",
      "name": "Joohwan.",
      "url": "https://github.com/Piwriw"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://piwriw.github.io/2024/12/26/cloud/k8s/containerd/nerdctl%E7%9A%84%E4%BD%BF%E7%94%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'nerdctl的使用',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><script src="/js/welcome.js"></script><script src="https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js"></script><link rel="stylesheet" href="/css/categories.css"><link rel="stylesheet" href="/css/tabs.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">259</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">76</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">60</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-folder-open"></i><span> 文章统计</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page" href="/wish/"><i class="fa-fw fas fa-tags"></i><span> 许愿墙</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/nerdctl.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Joohwan</span></a><a class="nav-page-title" href="/"><span class="site-name">nerdctl的使用</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/charts/"><i class="fa-fw fas fa-folder-open"></i><span> 文章统计</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page" href="/wish/"><i class="fa-fw fas fa-tags"></i><span> 许愿墙</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">nerdctl的使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-26T13:55:55.000Z" title="发表于 2024-12-26 21:55:55">2024-12-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-28T13:29:12.663Z" title="更新于 2026-02-28 21:29:12">2026-02-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cloud/">cloud</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cloud/k8s/">k8s</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cloud/k8s/containerd/">containerd</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>9分钟</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2026-02-28 21:29:12&quot;}" hidden></div><h1 id="nerdctl的使用"><a href="#nerdctl的使用" class="headerlink" title="nerdctl的使用"></a>nerdctl的使用</h1><h2 id="什么是nerdctl"><a href="#什么是nerdctl" class="headerlink" title="什么是nerdctl"></a>什么是nerdctl</h2><p>nerdctl是containerd官方提供的兼容Docker命令行的工具，支持Docker Cli所有命令，并且支持dokcer-compose</p>
<h2 id="设计初衷"><a href="#设计初衷" class="headerlink" title="设计初衷"></a>设计初衷</h2><p>不是Docker Cli复制品，希望促进containerd创新实验的发展，Docker不支持这些实验特性如镜像延迟加载，镜像加密</p>
<p><img src="https://raw.githubusercontent.com/Piwriw/PicGo/master/image202412232335736.png"></p>
<h2 id="安装nerdctl"><a href="#安装nerdctl" class="headerlink" title="安装nerdctl"></a>安装nerdctl</h2><p>官方提供俩种安装包</p>
<ul>
<li>精简安装包：nerdctl-<VERSION>-linux-amd64.tar.gz 仅包含nerdctl的二进制文件，以及rootless模式下的辅助安装脚本，需要解压到&#x2F;user&#x2F;local&#x2F;bin目录</li>
<li>完整安装包：nerdctl-full-<VERSION>-linux-amd64-.tar.gz。包含containerd、CNI、runc、BUildKit、rootlesskit等完整组件，需要解压到&#x2F;user&#x2F;local目录</li>
</ul>
<p> cat share&#x2F;doc&#x2F;nerdctl-full&#x2F;README.md可以看见组件版本</p>
<ol>
<li><p>下载nerdctl完整安装包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/containerd/nerdctl/releases/download/v2.0.2/nerdctl-full-2.0.2-linux-amd64.tar.gz</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>解压到&#x2F;usr&#x2F;local&#x2F;</p>
</li>
</ol>
   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nerdctl-full-2.0.2-linux-amd64.tar.gz -C /usr/local</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>查看是否安装成功</li>
</ol>
   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp1ebizftw2vpbpm737wZ ~]# nerdctl info</span><br><span class="line">Client:</span><br><span class="line"> Namespace:     default</span><br><span class="line"> Debug Mode:    false</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Server Version: v1.7.24</span><br><span class="line"> Storage Driver: overlayfs</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Cgroup Version: 1</span><br><span class="line"> Plugins:</span><br><span class="line">  Log:     fluentd journald json-file none syslog</span><br><span class="line">  Storage: native overlayfs</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: builtin</span><br><span class="line"> Kernel Version:   3.10.0-957.21.3.el7.x86_64</span><br><span class="line"> Operating System: CentOS Linux 7 (Core)</span><br><span class="line"> OSType:           linux</span><br><span class="line"> Architecture:     x86_64</span><br><span class="line"> CPUs:             2</span><br><span class="line"> Total Memory:     1.716GiB</span><br><span class="line"> Name:             iZbp1ebizftw2vpbpm737wZ</span><br><span class="line"> ID:               312e2c09-efc8-41e7-9d4b-761e8a1699e6</span><br><span class="line"></span><br><span class="line">WARNING: IPv4 forwarding is disabled</span><br><span class="line">WARNING: bridge-nf-call-iptables is disabled</span><br><span class="line">WARNING: bridge-nf-call-ip6tables is disabled</span><br><span class="line">[root@iZbp1ebizftw2vpbpm737wZ ~]# </span><br></pre></td></tr></table></figure>

<blockquote>
<p>mac也支持containerd，但是需要借助lima</p>
<p>Lima是专门在mac上的contained和nerdctl的项目</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install lima</span><br><span class="line">limactl start</span><br><span class="line">lim nerdctl run -d --name nginx -p 127.0.0.1:8080:80 nginx:alpine</span><br></pre></td></tr></table></figure>

<h2 id="命令行的使用"><a href="#命令行的使用" class="headerlink" title="命令行的使用"></a>命令行的使用</h2><p>和Docker使用相当</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp1ebizftw2vpbpm737wZ ~]# nerdctl help                                                                                                                                                             </span><br><span class="line">nerdctl is a command line interface for containerd                                                                                                                                                         </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">Config file ($NERDCTL_TOML): /etc/nerdctl/nerdctl.toml                                                                                                                                                     </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">Usage: nerdctl [flags]                                                                                                                                                                                     </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">helpers.Management commands:                                                                                                                                                                               </span><br><span class="line">  apparmor   Manage AppArmor profiles                                                                                                                                                                      </span><br><span class="line">  builder    Manage builds                                                                                                                                                                                 </span><br><span class="line">  container  Manage containers                                                                                                                                                                             </span><br><span class="line">  image      Manage images                                                                                                                                                                                 </span><br><span class="line">  ipfs       Distributing images on IPFS                                                                                                                                                                   </span><br><span class="line">  namespace  Manage containerd namespaces                                                                                                                                                                  </span><br><span class="line">  network    Manage networks                                                                                                                                                                               </span><br><span class="line">  system     Manage containerd                                                                                                                                                                             </span><br><span class="line">  volume     Manage volumes                                                                                                                                                                                </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">Commands:                                                                                                                                                                                                  </span><br><span class="line">  attach      Attach stdin, stdout, and stderr to a running container.                                                                                                                                     </span><br><span class="line">  build       Build an image from a Dockerfile. Needs buildkitd to be running.                                                                                                                             </span><br><span class="line">  commit      Create a new image from a container&#x27;s changes                                                                                                                                                </span><br><span class="line">  completion  Generate the autocompletion script for the specified shell                                                                                                                                   </span><br><span class="line">  compose     Compose                                                                                                                                                                                      </span><br><span class="line">  cp          Copy files/folders between a running container and the local filesystem.                                                                                                                     </span><br><span class="line">  create      Create a new container. Optionally specify &quot;ipfs://&quot; or &quot;ipns://&quot; scheme to pull image from IPFS.                                                                                            </span><br><span class="line">  diff        Inspect changes to files or directories on a container&#x27;s filesystem                                                                                                                          </span><br><span class="line">  events      Get real time events from the server                                                                                                                                                         </span><br><span class="line">  exec        Run a command in a running container                                                                                                                                                         </span><br><span class="line">  help        Help about any command                                                                                                                                                                       </span><br><span class="line">  history     Show the history of an image                                                                                                                                                                 </span><br><span class="line">  images      List images                                                                                                                                                                                  </span><br><span class="line">  info        Display system-wide information                                                                                                                                                              </span><br><span class="line">  inspect     Return low-level information on objects.                                                                                                                                                     </span><br><span class="line">  kill        Kill one or more running containers                                                                                                                                                          </span><br><span class="line">  load        Load an image from a tar archive or STDIN                                                                                                                                                    </span><br><span class="line">  login       Log in to a container registry                                                                                                                                                               </span><br><span class="line">  logout      Log out from a container registry                                                                                                                                                            </span><br><span class="line">  logs        Fetch the logs of a container. Expected to be used with &#x27;nerdctl run -d&#x27;.                                                                                                                    </span><br><span class="line">  pause       Pause all processes within one or more containers                                                                                                                                            </span><br><span class="line">  port        List port mappings or a specific mapping for the container                                                                                                                                   </span><br><span class="line">  ps          List containers                                                                                                                                                                              </span><br><span class="line">  pull        Pull an image from a registry. Optionally specify &quot;ipfs://&quot; or &quot;ipns://&quot; scheme to pull image from IPFS.                                                                                     </span><br><span class="line">  push        Push an image or a repository to a registry. Optionally specify &quot;ipfs://&quot; or &quot;ipns://&quot; scheme to push image to IPFS.                                                                         </span><br><span class="line">  rename      rename a container                                                                                                                                                                           </span><br><span class="line">  restart     Restart one or more running containers                                                                                                                                                       </span><br><span class="line">  rm          Remove one or more containers                                                                                                                                                                </span><br><span class="line">  rmi         Remove one or more images                                                                                                                                                                    </span><br><span class="line">  run         Run a command in a new container. Optionally specify &quot;ipfs://&quot; or &quot;ipns://&quot; scheme to pull image from IPFS.                                                                                  </span><br><span class="line">  save        Save one or more images to a tar archive (streamed to STDOUT by default)                                                                                                                     </span><br><span class="line">  start       Start one or more running containers                                                                                                                                                         </span><br><span class="line">  stats       Display a live stream of container(s) resource usage statistics.                                                                                                                             </span><br><span class="line">  stop        Stop one or more running containers                                                                                                                                                          </span><br><span class="line">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE                                                                                                                                        </span><br><span class="line">  top         Display the running processes of a container                                                                                                                                                 </span><br><span class="line">  unpause     Unpause all processes within one or more containers                                                                                                                                          </span><br><span class="line">  update      Update one or more running containers                                                                                                                                                        </span><br><span class="line">  version     Show the nerdctl version information                                                                                                                                                         </span><br><span class="line">  wait        Block until one or more containers stop, then print their exit codes.                                                                                                                        </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">Flags:                                                                                                                                                                                                     </span><br><span class="line">  -H, --H string                 Alias of --address (default &quot;/run/containerd/containerd.sock&quot;)                                                                                                            </span><br><span class="line">  -a, --a string                 Alias of --address (default &quot;/run/containerd/containerd.sock&quot;)                                                                                                            </span><br><span class="line">      --address string           containerd address, optionally with &quot;unix://&quot; prefix [$CONTAINERD_ADDRESS] (default &quot;/run/containerd/containerd.sock&quot;)                                                    </span><br><span class="line">      --bridge-ip string         IP address for the default nerdctl bridge network [$NERDCTL_BRIDGE_IP]                                                                                                    </span><br><span class="line">      --cgroup-manager string    Cgroup manager to use (&quot;cgroupfs&quot;|&quot;systemd&quot;) (default &quot;cgroupfs&quot;)                                                                                                         </span><br><span class="line">      --cni-netconfpath string   cni config directory [$NETCONFPATH] (default &quot;/etc/cni/net.d&quot;)                                                                                                            </span><br><span class="line">      --cni-path string          cni plugins binary directory [$CNI_PATH] (default &quot;/opt/cni/bin&quot;)                                                                                                         </span><br><span class="line">      --data-root string         Root directory of persistent nerdctl state (managed by nerdctl, not by containerd) (default &quot;/var/lib/nerdctl&quot;)                                                           </span><br><span class="line">      --debug                    debug mode                                                                                                                                                                </span><br><span class="line">      --debug-full               debug mode (with full output)                                                                                                                                             </span><br><span class="line">      --experimental             Control experimental: https://github.com/containerd/nerdctl/blob/main/docs/experimental.md [$NERDCTL_EXPERIMENTAL] (default true)                                         </span><br><span class="line">  -h, --help                     help for nerdctl                                                                                                                                                          </span><br><span class="line">      --host string              Alias of --address (default &quot;/run/containerd/containerd.sock&quot;)                                                                                                            </span><br><span class="line">      --host-gateway-ip string   IP address that the special &#x27;host-gateway&#x27; string in --add-host resolves to. Defaults to the IP address of the host. It has no effect without setting --add-host [$NERDCTL</span><br><span class="line">_HOST_GATEWAY_IP] (default &quot;172.29.67.77&quot;)                                                                                                                                                                 </span><br><span class="line">      --hosts-dir strings        A directory that contains /hosts.toml (containerd style) or /&#123;ca.cert, cert.pem, key.pem&#125; (docker style) (default [/etc/containerd/certs.d,/etc/dock</span><br><span class="line">er/certs.d])                                                                                                                                                                                               </span><br><span class="line">      --insecure-registry        skips verifying HTTPS certs, and allows falling back to plain HTTP                                                                                                        </span><br><span class="line">  -n, --n string                 Alias of --namespace (default &quot;default&quot;)                                                                                                                                  </span><br><span class="line">      --namespace string         containerd namespace, such as &quot;moby&quot; for Docker, &quot;k8s.io&quot; for Kubernetes [$CONTAINERD_NAMESPACE] (default &quot;default&quot;)                                                      </span><br><span class="line">      --snapshotter string       containerd snapshotter [$CONTAINERD_SNAPSHOTTER] (default &quot;overlayfs&quot;)                                                                                                    </span><br><span class="line">      --storage-driver string    Alias of --snapshotter (default &quot;overlayfs&quot;)                                                                                                                              </span><br><span class="line">  -v, --version                  version for nerdctl                                                                                                                                                       </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">Run &#x27;nerdctl COMMAND --help&#x27; for more information on a command.                                                                                                                                            </span><br><span class="line">                                                                                                                                                                                                           </span><br><span class="line">[root@iZbp1ebizftw2vpbpm737wZ ~]#                                                                                                                                                                          </span><br></pre></td></tr></table></figure>

<p>nerdctl但是比Docker多了一个命名空间的概念，通过–namespace</p>
<ul>
<li>如果是docker可以设置：alias docker&#x3D;nerdctl</li>
<li>如果是K8s环境：alias docker&#x3D;’nerdctl -n k8s.io’</li>
</ul>
<h2 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nerdctl run -d --name nginx -p 80:80 nginx:alpine</span><br></pre></td></tr></table></figure>

<ul>
<li>与Docker不同的是，nerdctl运行容器时，使用CNI插件，默认使用bridgeCNI插件，默认网段10.4.0.0&#x2F;24</li>
</ul>
<h2 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h2><p>nerdctl构建镜像的能力，依赖于BuildKit</p>
<p>构建镜像之前启动BuildKit</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable --now buildkit</span><br></pre></td></tr></table></figure>

<p>和Docker一样打包</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> echoc <span class="string">&#x27;this is a nginx image&#x27;</span> &gt; /usr/share/nginx/html/index.html</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nerdctl build -t mynginx.</span><br></pre></td></tr></table></figure>

<p>更多的build 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp1ebizftw2vpbpm737wZ ~]# nerdctl build -h</span><br><span class="line">Build an image from a Dockerfile. Needs buildkitd to be running.</span><br><span class="line">If Dockerfile is not present and -f is not specified, it will look for Containerfile and build with it.</span><br><span class="line"></span><br><span class="line">Usage: nerdctl build [flags] PATH</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">      --allow stringArray           Allow extra privileged entitlement, e.g. network.host, security.insecure</span><br><span class="line">      --attest stringArray          Attestation parameters (format: &quot;type=sbom,generator=image&quot;)</span><br><span class="line">      --build-arg stringArray       Set build-time variables</span><br><span class="line">      --build-context stringArray   Additional build contexts (e.g., name=path)</span><br><span class="line">      --buildkit-host string        BuildKit address [$BUILDKIT_HOST]</span><br><span class="line">      --cache-from stringArray      External cache sources (eg. user/app:cache, type=local,src=path/to/dir)</span><br><span class="line">      --cache-to stringArray        Cache export destinations (eg. user/app:cache, type=local,dest=path/to/dir)</span><br><span class="line">  -f, --file string                 Name of the Dockerfile</span><br><span class="line">  -h, --help                        help for build</span><br><span class="line">      --iidfile string              Write the image ID to the file</span><br><span class="line">      --label stringArray           Set metadata for an image</span><br><span class="line">      --network string              Set type of network for build (format:network=default|none|host) (default &quot;default&quot;)</span><br><span class="line">      --no-cache                    Do not use cache when building the image</span><br><span class="line">  -o, --output string               Output destination (format: type=local,dest=path)</span><br><span class="line">      --platform strings            Set target platform for build (e.g., &quot;amd64&quot;, &quot;arm64&quot;)</span><br><span class="line">      --progress string             Set type of progress output (auto, plain, tty). Use plain to show container output (default &quot;auto&quot;)</span><br><span class="line">      --provenance string           Shorthand for &quot;--attest=type=provenance&quot;</span><br><span class="line">      --pull                        On true, always attempt to pull latest image version from remote. Default uses buildkit&#x27;s default.</span><br><span class="line">  -q, --quiet                       Suppress the build output and print image ID on success</span><br><span class="line">      --rm                          Remove intermediate containers after a successful build (default true)</span><br><span class="line">      --sbom string                 Shorthand for &quot;--attest=type=sbom&quot;</span><br><span class="line">      --secret stringArray          Secret file to expose to the build: id=mysecret,src=/local/secret</span><br><span class="line">      --ssh stringArray             SSH agent socket or keys to expose to the build (format: default|&lt;id&gt;[=&lt;socket&gt;|&lt;key&gt;[,&lt;key&gt;]])</span><br><span class="line">  -t, --tag stringArray             Name and optionally a tag in the &#x27;name:tag&#x27; format</span><br><span class="line">      --target string               Set the target build stage to build</span><br><span class="line"></span><br><span class="line">See also &#x27;nerdctl --help&#x27; for the global flags such as &#x27;--namespace&#x27;, &#x27;--snapshotter&#x27;, and &#x27;--cgroup-manager&#x27;.</span><br><span class="line">[root@iZbp1ebizftw2vpbpm737wZ ~]# </span><br></pre></td></tr></table></figure>



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/Piwriw">Joohwan.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://piwriw.github.io/2024/12/26/cloud/k8s/containerd/nerdctl%E7%9A%84%E4%BD%BF%E7%94%A8/">https://piwriw.github.io/2024/12/26/cloud/k8s/containerd/nerdctl的使用/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://piwriw.github.io" target="_blank">Joohwan</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/k8s/">k8s</a><a class="post-meta__tags" href="/tags/cloud/">cloud</a><a class="post-meta__tags" href="/tags/containerd/">containerd</a></div><div class="post-share"><div class="social-share" data-image="/img/nerdctl.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/31/cloud/k8s/kubeadm/K8s%E5%AE%89%E8%A3%85-%E5%9F%BA%E4%BA%8Ekubeadm/" title="K8s安装-基于kubeadm"><img class="cover" src="/img/kubeadm.png" onerror="onerror=null;src='/img/404.png'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">K8s安装-基于kubeadm</div></div><div class="info-2"><div class="info-item-1">K8s安装-基于kubeadm 基于1.29  系统要求   软硬件 最低要求 推荐配置    主机资源 若集群中有1-5个Node：Master：2c+2GB；Node：1c Master：4C和16GB；Node实际运行   Linux Kernel内核在v3.10以上 CoreOS7.9   etcd 版本v3以上 etcdv3   容器运行时 各种cri containerd v1.7   主要注意centos7默认开启防火墙，而K8s和各个Node有大量通信，推荐开启以下端口    组件 默认端口    API Server 6443   Controller Manager 10257   Scheduler 10259   Kubelet 10250；10255(只读端口)   etcd 2379（供客户端访问）；2380（etcd集群节点之间访问）   集群的DNS服务 53（UDP）；53（TCP）   对于其他组件，可能还需要开放其他端口，比如CNI Calico需要开放179端口 123# 关闭防火墙systemctl disable firewalldsy...</div></div></div></a><a class="pagination-related" href="/2024/12/25/cloud/k8s/containerd/ctr%E7%9A%84%E4%BD%BF%E7%94%A8/" title="ctr的使用"><img class="cover" src="/img/containerd.png" onerror="onerror=null;src='/img/404.png'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">ctr的使用</div></div><div class="info-2"><div class="info-item-1">ctr的使用 安装完containerd之后，ctr也安装好   ctr上containerd提供的客户端，内置在containerd中  查看支持命令 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455[root@iZbp1ebizftw2vpbpm737wZ ~]# ctr --help                                                                                                                                                               NAME:                                                                                                               ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/12/25/cloud/k8s/containerd/ctr%E7%9A%84%E4%BD%BF%E7%94%A8/" title="ctr的使用"><img class="cover" src="/img/containerd.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-25</div><div class="info-item-2">ctr的使用</div></div><div class="info-2"><div class="info-item-1">ctr的使用 安装完containerd之后，ctr也安装好   ctr上containerd提供的客户端，内置在containerd中  查看支持命令 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455[root@iZbp1ebizftw2vpbpm737wZ ~]# ctr --help                                                                                                                                                               NAME:                                                                                                               ...</div></div></div></a><a class="pagination-related" href="/2024/12/25/cloud/k8s/containerd/crictl/" title="crictl"><img class="cover" src="/img/containerd.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-25</div><div class="info-item-2">crictl</div></div><div class="info-2"><div class="info-item-1">crictl什么是crictlCRI的CLI工具-crictl 安装与配置安装12wget https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.32.0/crictl-v1.32.0-linux-amd64.tar.gztar -zxvf crictl-v1.32.0-linux-amd64.tar.gz -C /usr/local/bin  配置 crictl连接containerd 默认情况下（没有配置crictl配置文件），crictl在Linux节点下会通过几种sock连接运行时的endpoint  docker：unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;dockershim.sock containerd: unix:&#x2F;&#x2F;&#x2F;run&#x2F;contianerd&#x2F;containerd.sock Ciro: unix:&#x2F;&#x2F;&#x2F;run&#x2F;crio&#x2F;crio&#x2F;so...</div></div></div></a><a class="pagination-related" href="/2024/12/25/cloud/k8s/containerd/containerd-%E5%AE%89%E8%A3%85/" title="containerd-安装"><img class="cover" src="/img/containerd.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-25</div><div class="info-item-2">containerd-安装</div></div><div class="info-2"><div class="info-item-1">containerd-安装官方提供三种类型安装包  containerd：仅包含containerd相关二进制精简安装包，格式为containerd-${VERSION}.${OS}-${ARCH}.tar.gz cri-containerd：包含containerd、cri与runc工具的安装包，格式为cri-containerd-${VERSION}.${OS}-${ARCH}.tar.gz cri-containerd-cni：包含containerd、cri、runc、cni工具的安装包，格式为cri-containerd-cni-${VERSION}.${OS}-${ARCH}.tar.gz  目前主流支持window和linux平台 大致流程安装 下载containerd release安装包  1wget https://github.com/containerd/containerd/releases/download/v1.7.24/cri-containerd-cni-1.7.24-linux-amd64.tar.gz   安装包解压  1tar -zxvf ...</div></div></div></a><a class="pagination-related" href="/2024/12/24/cloud/k8s/containerd/containerd-CRI/" title="containerd-CRI"><img class="cover" src="/img/containerd.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-24</div><div class="info-item-2">containerd-CRI</div></div><div class="info-2"><div class="info-item-1">containerd-CRIOverviewCRI定义了容器和镜像服务的接口，使用Protocol Buffer协议  定义了kubelet与不同容器运行时交互规范 接口包含客户端与服务端   123kubectl xx--containerd-runtime-endpoint=&lt;CRI Server的Uninx Socket&gt;--image-service-endpont=&lt; CRI Serverdr的Uninx Socket&gt;   如果Runtime Service和Image Service在一个gPRC Server中要配置container-runtime-endpoint，当image-service-endpoint为空，默认使用container-runtime-endpoint一致的地址 如果是K8s 1.24以前使用CRI Server需要设置container-runtime&#x3D;remote（自从kubelet移除了dockershim，这个参数废弃，默认container-runtime&#x3D;docker  Runti...</div></div></div></a><a class="pagination-related" href="/2025/08/24/cloud/k8s/K8s%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97-%E5%AE%A2%E6%88%B7%E7%AB%AF/" title="K8s开发指南-客户端"><img class="cover" src="/img/k8sLogo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-24</div><div class="info-item-2">K8s开发指南-客户端</div></div><div class="info-2"><div class="info-item-1">K8s开发指南-客户端 基于K8s v1.29  API客户端 Ref：https://github.com/kubernetes/client-go  K8s认证方式主要一下俩类：  集群外的认证：客户端程序运行在集群外，以独立进程访问API Server 集群内的认证：客户端在K8s内以Pod形式运行，通过内部服务名访问API Server  客户端访问API Server常见的认证方式有以下的几种  数字证书方式 ServiceAccount方式 BearerToken方式  对于运行在K8s集群之外的客户端，建议使用数字证书方式连接API Server，客户端需要配置的信息包括CA根证书、客户端证书、客户段私钥以及API Server地址 对于运行在集群内的Pod，建议使用ServiceAccount认证方式，需要为Pod增加ServiceAccount资源，并为ServiceAccount配置好正确的RBAC权限 基于kubeconfig文件的配置方式有以下几种：  用户HOME目录中的约定目录，例如$HOME&#x2F;.kube&#x2F;config 在环境变量K...</div></div></div></a><a class="pagination-related" href="/2025/08/23/cloud/k8s/K8s%E5%BC%80%E5%8F%91-API%E8%AF%A6%E8%A7%A3/" title="K8s开发-API详解"><img class="cover" src="/img/k8sLogo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-23</div><div class="info-item-2">K8s开发-API详解</div></div><div class="info-2"><div class="info-item-1">K8s开发-API详解 基于K8s v1.29  资源对象一个K8s资源对象描述一般是kind、apiVersion、metadata、spec和status五个部分 资源对象的类型资源对象的类型用Kind属性表示，总体分为3个类型：  对象（Object）、代表系统中永久资源实体，比如Pod、RC 列表（List）：资源对象的合集 简单类别（Simple）：作用于资源对象或非持久辅助实体的特定操作，比如Status、Scale、ListOptions等  资源对象的元数据metadata是资源对象的元数据定义，由一组属性来定义，在K8s中，每个资源对象都必须包含以下元数据属性：  namespec：对象所属的命名空间，如果不指定，则昔日会将对象置于名为default中 name：对象的名称、在一个ns下，唯一性 uid：系统为每个对象生成唯一的ID，符合RFC4122 labels：自定义标签 annotations：用户自定义注解，被K8s内部进程或者外部工具使用 resourceVersion：用于识别资源内部斑斑的字符串，在Watch操作，可以避免Get和下一次Watch...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Joohwan.</div><div class="author-info-description">该知道的都知道，不知道的慢慢了解</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">259</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">76</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">60</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/piwriw"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/piwriw" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:piwriw@163.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget"><div class="item-headline"><i class="iconfont icat-visitor"></i><span>来访者</span></div><div class="item-content"><div id="welcome-info"></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#nerdctl%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">nerdctl的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFnerdctl"><span class="toc-number">1.1.</span> <span class="toc-text">什么是nerdctl</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E5%88%9D%E8%A1%B7"><span class="toc-number">1.2.</span> <span class="toc-text">设计初衷</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85nerdctl"><span class="toc-number">1.3.</span> <span class="toc-text">安装nerdctl</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">命令行的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">1.5.</span> <span class="toc-text">运行容器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-number">1.6.</span> <span class="toc-text">构建镜像</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/web/gorm/09-logger/" title="Gorm-日志系统模块原理说明"><img src="/img/go.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Gorm-日志系统模块原理说明"/></a><div class="content"><a class="title" href="/2026/01/11/web/gorm/09-logger/" title="Gorm-日志系统模块原理说明">Gorm-日志系统模块原理说明</a><time datetime="2026-01-11T11:56:27.000Z" title="发表于 2026-01-11 19:56:27">2026-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/web/gorm/08-migration/" title="Gorm-迁移功能模块原理说明"><img src="/img/go.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Gorm-迁移功能模块原理说明"/></a><div class="content"><a class="title" href="/2026/01/11/web/gorm/08-migration/" title="Gorm-迁移功能模块原理说明">Gorm-迁移功能模块原理说明</a><time datetime="2026-01-11T10:56:27.000Z" title="发表于 2026-01-11 18:56:27">2026-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/web/gorm/10-plugin/" title="Gorm-插件系统模块原理说明"><img src="/img/go.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Gorm-插件系统模块原理说明"/></a><div class="content"><a class="title" href="/2026/01/11/web/gorm/10-plugin/" title="Gorm-插件系统模块原理说明">Gorm-插件系统模块原理说明</a><time datetime="2026-01-11T10:56:27.000Z" title="发表于 2026-01-11 18:56:27">2026-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/web/gorm/07-transaction/" title="Gorm-事务处理模块原理说明"><img src="/img/go.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Gorm-事务处理模块原理说明"/></a><div class="content"><a class="title" href="/2026/01/11/web/gorm/07-transaction/" title="Gorm-事务处理模块原理说明">Gorm-事务处理模块原理说明</a><time datetime="2026-01-11T09:56:27.000Z" title="发表于 2026-01-11 17:56:27">2026-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/11/web/gorm/06-associations/" title="Gorm-关联关系模块原理说明"><img src="/img/go.png" onerror="this.onerror=null;this.src='/img/404.png'" alt="Gorm-关联关系模块原理说明"/></a><div class="content"><a class="title" href="/2026/01/11/web/gorm/06-associations/" title="Gorm-关联关系模块原理说明">Gorm-关联关系模块原理说明</a><time datetime="2026-01-11T08:56:27.000Z" title="发表于 2026-01-11 16:56:27">2026-01-11</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2023 - 2026 By Joohwan.</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://piwriw-twikoo-git-main-piwriw.vercel.app/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://piwriw-twikoo-git-main-piwriw.vercel.app/',
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="/js/categories.js" defer></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>